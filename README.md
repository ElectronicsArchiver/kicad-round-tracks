
<div align = center>

# KiCad Round Tracks

*A subdivision / native arc-based track rounding plugin for* ***KiCad***

<br>

![Showcase]

---

<br>

</div>

## Goal

The goal is to algorithmically melt a **PCB** design, <br>
smoothing all tracks in a predictable manner. 

<br>

---

<br>

## Teardrop Plugin

For best results possible, consider using it<br>
in conjunction with this **[Teardrop Plugin]**.

<br>

#### Note

Currently, the teardrop plugin has not <br>
been ported fully ported to KiCad 6.

I've fixed the behavior with native arcs <br>
on **[My Fork][Mitxela Teardrop]** of it which should hopefully <br>
be merged in soon.

I have written extensively about my KiCad <br>
melting experiments **[Here][Melting A]** and over **[Here][Melting B]**.

<br>

---

<br>

## Use

***For the KiCad 5 compatible version, please use the [kicad-5] branch.***

<br>

The intended use is to have:

- A source PCB file, which is easy to edit
- A rendered output file, generated by this plugin

<br>

After running **DRC** on the output, you <br>
can then go back and adjust the original <br>
file before running the plugin again.

<br>

#### Selection

If you select part of the board, only <br>
the selected tracks will get melted.

*If nothing is selected, the whole file will be processed.*

<br>

#### `Create A New File`

Does not immediately write anything to disk, <br>
it merely appends `-rounded` to the filename <br>
so that the next time you hit <kbd> Save </kbd> it won't <br>
overwrite the original.

<br>

#### `Use Native`

If this option is ticked, the rounded sections are <br>
implemented using KiCad 6's native PCB arcs.

These _can_ be adjusted after the script has run, <br>
but I still recommend keeping the unrounded <br>
source PCB file.

I have tried hard to ensure that the output <br>
PCB is the same, regardless of if native or <br>
subdivision-based arcs are used.

If the option is ticked, the number <br>
of passes parameter is ignored.

Otherwise, the curves are generated<br>
from many small straight sections.

`2` *or* `3` *passes is usually sufficient.*

There is no loading bar, so if the design is <br>
complicated the interface might freeze for <br>
a few seconds while it runs.

You can set the number of passes to be 1, <br>
and run the plugin repeatedly, and it will <br>
give the same results, while letting you <br>
inspect the intermediate stages.

<br>

#### `Radius`

This option is the maximum radius <br>
a curve will have on a `90°` bend.

A smaller curve will be used if the <br>
tracks are shorter, or if the angle <br>
between them is sharper.

The resulting curves will always pass through <br>
at least one point of the original tracks.

Thus individual curves can be controlled by <br>
splitting tracks into smaller sections.

If a curve has too large a radius, placing <br>
a small `45°` bend will make it smaller.

Similarly, if a bigger radius is needed for <br>
certain tracks, you can draw an approximate <br>
curve with free-angle tracks to achieve this.

<br>

---

<br>

## Installation

Now available from the **Plugin & Content** manager.

<br>

### Manual

1. Clone or download & unzip the repository

2. Moved the content to a **KiCad** plugin folder

  You can choose where **KiCad** searches for plugins.
  
  For this:
  
  1. Open the scripting console in pcbnew
  
  2. Run
  
  ```python
  import pcbnew
  print(pcbnew.GetWizardsSearchPaths())
  ```

<br>

### Toolbar

The setting for enabling the quick access <br>
button to the plugin can be found under:

<kbd>Preferences</kbd> › <kbd>Preferences...</kbd> › <kbd>PCB Editor</kbd> › <kbd>Action Plugins</kbd>

<br>

---

<br>

## History

This plugin is based on:

- **[Flex Rounding Suite]** <br>
  by `Julian Loiacono` 

- **[Kicad Round Tracks]** <br>
  by `Antoine Pintout`

*My contribution updated the algorithm so that* <br>
*subdivisions are applied equally, resulting in* <br>
*smoother tracks with fewer clearance errors.*

<br>

##### `2017`

  **Miles McCoo** <br>
  *Original Copyright*

<br>

##### `2018 / October`

  **Julian Loiacono** <br>
  *Extensive Modifications*

<br>

##### `2019 / May`

  **Antoine Pintout** <br>
  *Multi-layer Support* <br>
  *Repacked as Action Plugin*

<br>

##### `2021 / January`

  **mitxela** <br>
  *Updated Subdivision Algorithm*


<!----------------------------------------------------------------------------->

[Showcase]: https://mitxela.com/img/uploads/sw/kicad/example.png

[Mitxela Teardrop]: https://github.com/mitxela/kicad-teardrops/tree/mitxela/V6.0
[Teardrop Plugin]: https://github.com/NilujePerchut/kicad_scripts

[Melting B]: https://mitxela.com/projects/melting_kicad_2
[Melting A]: https://mitxela.com/projects/melting_kicad

[Flex Rounding Suite]: https://github.com/jcloiacon/flexRoundingSuite
[KiCad Round Tracks]: https://github.com/stimulu/kicad-round-tracks

[kicad-5]: https://github.com/mitxela/kicad-round-tracks/tree/kicad-5
